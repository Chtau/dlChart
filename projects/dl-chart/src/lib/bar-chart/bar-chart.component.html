<ng-container>
  <svg class="bar-chart-svg" width="100%" height="100%">
    <svg id="bars" class="bars" x="30px" y="30px" width="calc(100% - 60px)" height="calc(100% - 60px)" >
      <rect (mousemove)="onHoverSegment($event, bar)" (mouseleave)="onLeaveSegment($event)" (click)="onClickSegment(bar)"
        [attr.id]="bar.id" [attr.class]="'bar ' + cssClassSegment(bar)" [attr.fill]="bar.color" 
        [attr.x]="normOrientation(bar.x, bar.y, (bar.isMinusValue === false ? (100 - barGroundLineY) : ((100 - barGroundLineY) - bar.height)), bar.x) + '%'" 
        [attr.width]="normOrientation(bar.width, bar.height, bar.height, bar.width) + '%'" 
        [attr.y]="normOrientation(bar.y, bar.x, bar.x, (bar.isMinusValue === false ? (100 - barGroundLineY) : ((100 - barGroundLineY) - bar.height))) + '%'" 
        [attr.height]="normOrientation(bar.height, bar.width, bar.width, bar.height) + '%'" 
      *ngFor="let bar of bars">
      </rect>
      <line id="dlChartBarSelectLineIndicator" *ngIf="currentActiveBar != null && !shouldHideSelectLine" 
        [attr.y1]="(currentActiveBar.isMinusValue === false ?  normOrientation((barGroundLineY - currentActiveBar.height), 0, 0, ((100 - barGroundLineY) + currentActiveBar.height)) : normOrientation((barGroundLineY + currentActiveBar.height), 0, 0, ((100 - barGroundLineY) - currentActiveBar.height))) + '%'"
        [attr.x1]="(currentActiveBar.isMinusValue === false ?  normOrientation(0, (barGroundLineY - currentActiveBar.height), ((100 - barGroundLineY) + currentActiveBar.height), 0) : normOrientation(0, (barGroundLineY + currentActiveBar.height), ((100 - barGroundLineY) - currentActiveBar.height), 0)) + '%'" 
        [attr.y2]="(currentActiveBar.isMinusValue === false ?  normOrientation((barGroundLineY - currentActiveBar.height), 100, 100, ((100 - barGroundLineY) + currentActiveBar.height)) : normOrientation((barGroundLineY + currentActiveBar.height), 100, 100, ((100 - barGroundLineY) - currentActiveBar.height))) + '%'" 
        [attr.x2]="(currentActiveBar.isMinusValue === false ?  normOrientation(100, (barGroundLineY - currentActiveBar.height), ((100 - barGroundLineY) + currentActiveBar.height), 100) : normOrientation(100, (barGroundLineY + currentActiveBar.height), ((100 - barGroundLineY) - currentActiveBar.height), 100)) + '%'" 
        class="selection-line active-stroke"
      />
      <line id="dlChartBarNormalizedLine" 
        [attr.y1]="normOrientation(barGroundLineY, 0, 0, (100 - barGroundLineY)) + '%'" 
        [attr.x1]="normOrientation(0, barGroundLineY, (100 - barGroundLineY), 0) + '%'" 
        [attr.y2]="normOrientation(barGroundLineY, 100, 100, (100 - barGroundLineY)) + '%'" 
        [attr.x2]="normOrientation(100, barGroundLineY, (100 - barGroundLineY), 100) + '%'" 
      class="ground-line" />
    </svg>
    <svg id="xaxis" 
      [attr.x]="normOrientation('30px', 'calc(100% - 30px)', '0%', '30px')" 
      [attr.y]="normOrientation('calc(100% - 30px)', '30px', '30px', '0px')" 
      [attr.width]="normOrientation('calc(100% - 60px)', '30px', '30px', 'calc(100% - 60px)')" 
      [attr.height]="normOrientation( '30px', 'calc(100% - 60px)', 'calc(100% - 60px)', '30px')">
      <g class="x axis xaxis-text">
        <g class="tick" *ngFor="let axis of xAxis; let i=index">
          <line 
            [attr.x1]="normOrientation(axis.position + '%', '0', 'calc(100% - 6px)', (100 - axis.position) + '%')" 
            [attr.x2]="normOrientation(axis.position + '%', 4, '100%', (100 - axis.position) + '%')" 
            [attr.y1]="normOrientation(0, axis.position + '%', (100 - axis.position) + '%', '30px')"
            [attr.y2]="normOrientation(4, axis.position + '%', (100 - axis.position) + '%', '24px')"
          ></line>
          <text 
            [attr.dy]="normOrientation('.71em', '.31em', '.32em', '.32em')"
            [attr.x]="normOrientation(axis.position + '%', '6', '75%', (100 - axis.position) + '%')" 
            [attr.y]="normOrientation('6', axis.position + '%', axis.position + '%', '18px')" 
            [ngStyle]="{'text-anchor': normOrientation('middle', 'start', 'end', 'middle')}"
          >{{ axis.text }}</text>
        </g>
        <line id="dlChartBarXLine" 
          [attr.x1]="normOrientation(0, 0, '100%', '0')" 
          [attr.y1]="normOrientation(0, 0, '0%', '30px')" 
          [attr.x2]="normOrientation('100%', 0, '100%', '100%')" 
          [attr.y2]="normOrientation(0, '100%', '100%', '30px')" 
        class="x-stroke" />
      </g>
    </svg>
    <svg id="yaxis" 
      [attr.x]="normOrientation('0%', '30px', '30px', 'calc(100% - 30px)')" 
      [attr.y]="normOrientation('30px', 'calc(100% - 30px)', '0px', '30px')" 
      [attr.width]="normOrientation('30px', 'calc(100% - 60px)', 'calc(100% - 60px)', '30px')" 
      [attr.height]="normOrientation('calc(100% - 60px)', '30px', '30px', 'calc(100% - 60px)')" 
    style="overflow: visible;">
      <g class="y axis" *ngIf="activeLeftScaleAxis">
        <g class="tick" *ngFor="let axis of yAxis">
          <line
            [attr.x1]="normOrientation('calc(100% - 6px)', axis.position + '%', (100 - axis.position) + '%', 0)" 
            [attr.y1]="normOrientation(axis.position + '%', '0', '30px', (100 - axis.position) + '%')" 
            [attr.x2]="normOrientation('100%', axis.position + '%', (100 - axis.position) + '%', 6)" 
            [attr.y2]="normOrientation(axis.position + '%', '6', '24px', (100 - axis.position) + '%')"
          ></line>
          <text dy=".32em" 
            [attr.x]="normOrientation('75%', axis.position + '%', (100 - axis.position) + '%', '8')" 
            [attr.y]="normOrientation(axis.position + '%', '12px', '18px', (100 - axis.position) + '%')" 
            [ngStyle]="{'text-anchor': normOrientation('end', 'middle', 'middle', 'start')}"
          >{{ axis.text }}</text>
        </g>
        <line id="dlChartBarYLine" 
          [attr.x1]="normOrientation('100%', '0', '0', 0)"
          [attr.y1]="normOrientation('0%', '0', '30px', '0%')"
          [attr.x2]="normOrientation('100%', '100%', '100%', 0)"
          [attr.y2]="normOrientation('100%', '0', '30px', '100%')" 
        class="x-stroke" />
      </g>
    </svg>
    <svg *ngIf="activeLeftScaleAxis" 
      [attr.x]="normOrientation('31px', '30px', 'calc(100% - 30px)', 'calc(100% - 43px)')" 
      [attr.y]="normOrientation('30px', 'calc(100% - 43px)', '31px', 'calc(100% - 31px)')"
      class="scale-label"
    >
      <text [attr.y]="'0'" [attr.x]="'0'" dy=".71em" 
        [ngStyle]="{'transform': normOrientation('rotate(-90deg)', 'rotate(0deg)', 'rotate(0deg)', 'rotate(-90deg)'), 'text-anchor': normOrientation('end', 'start', 'end', 'start')}"
      >{{ currentScaleLabel }}</text>
    </svg>
    <svg id="yaxis2" 
      [attr.x]="normOrientation('calc(100% - 30px)', '30px', '30px', '0%')" 
      [attr.y]="normOrientation('30px', '0px', 'calc(100% - 30px)', '30px')" 
      [attr.width]="normOrientation('30px', 'calc(100% - 60px)', 'calc(100% - 60px)', '30px')" 
      [attr.height]="normOrientation('calc(100% - 60px)', '30px', '30px', 'calc(100% - 60px)')" 
    style="overflow: visible;">
      <g class="y axis" *ngIf="activeRightScaleAxis">
        <g class="tick" *ngFor="let axis of yAxis">
          <line 
            [attr.x1]="normOrientation(0, axis.position + '%', (100 - axis.position) + '%', 'calc(100% - 6px)')"
            [attr.y1]="normOrientation(axis.position + '%', '30px', 0, (100 - axis.position) + '%')" 
            [attr.x2]="normOrientation(6, axis.position + '%', (100 - axis.position) + '%', '100%')"  
            [attr.y2]="normOrientation(axis.position + '%', '24px', 6, (100 - axis.position) + '%')"
          ></line>
          <text dy=".32em" 
            [attr.x]="normOrientation('8', axis.position + '%', (100 - axis.position) + '%', '75%')" 
            [attr.y]="normOrientation(axis.position + '%', '18px', '12px', (100 - axis.position) + '%')" 
            [ngStyle]="{'text-anchor': normOrientation('start', 'middle', 'middle', 'end')}"
          >{{ axis.text }}</text>
        </g>
        <line id="dlChartBarYLine" 
          [attr.x1]="normOrientation(0, '0', 0, '100%')" 
          [attr.y1]="normOrientation('0%', '30px', 0, '0%')" 
          [attr.x2]="normOrientation(0, '100%', '100%', '100%')" 
          [attr.y2]="normOrientation('100%', '30px', 0, '100%')" 
        class="x-stroke" />
      </g>
    </svg>
    <svg *ngIf="activeRightScaleAxis" 
      [attr.x]="normOrientation('calc(100% - 43px)', '30px', 'calc(100% - 31px)', '31px')"  
      [attr.y]="normOrientation('30px', '31px', 'calc(100% - 43px)', 'calc(100% - 31px)')"
      class="scale-label"
    >
      <text 
        [attr.y]="'0'" 
        [attr.x]="'0'" dy=".71em"
        [ngStyle]="{'transform': normOrientation('rotate(-90deg)', 'rotate(0deg)', 'rotate(0deg)', 'rotate(-90deg)'), 'text-anchor': normOrientation('end', 'start', 'end', 'start')}"
      >{{ currentScaleLabel }}</text>
    </svg>
  </svg>
  <div id="dlChartTooltip" *ngIf="tooltipShow" [style.top.px]="tooltipTop" [style.left.px]="tooltipLeft" class="tooltiptext">
    <span>{{ tooltipValue }}</span>
  </div>
</ng-container>